# shell语言学习

## shell环境

Linux的shell种类众多，其中`Bourne Again Shell`，即`Bash`应用最为广泛

shell脚本第一行的`#!/bin/bash`指定解释当前脚本文件的shell程序路径，告诉系统使用哪种解释器执行shell

### shell脚本运行方法

* 作为可执行程序

    ```
    chmod +x ./test.sh  #使脚本具有执行权限
    ./test.sh  #执行脚本
    ```

    此处需要写成`./test.sh`，直接写为`test.sh`后linux系统会去PATH中寻找`test.sh`环境变量，无法正确执行，而使用`./test.sh`明确告诉系统在当前目录中查找文件

* 作为解释器参数

    ```
    /bin/sh test.sh
    /bin/php test.php
    ```

    这种运行方式直接运行解释器，将shell脚本文件名作为参数传入。这种情况下无需在脚本第一行指定解释器信息，会被外部解释器覆盖

## 语法学习

### 变量

#### 变量定义

* 变量名不加`$`
* 变量名与等号之间不能有空格

#### 变量使用

使用一个定义过的变量，在变量名前面加`$`即可，如`$name`。同时也可在变量名外面加大括号`${name}`，帮助解释器识别变量边界

#### 只读变量

使用readonly命令可以将变量定义为只读变量，只读变量的值不能改变

```
myUrl="http://www.google.com"
readonly myUrl
```

#### 删除变量

使用unset命令可以删除变量，变量被删除后不能再次使用

unset命令不能删除只读变量

#### 变量类型

* 局部变量：在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量
* 环境变量：所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量
* shell变量：由shell程序设置的特殊变量，有一部分是局部变量，一部分是环境变量，这些变量保证了shell的正好运行

### 字符串

#### 单引号

* 单引号中的任何字符都会原样输出，**单引号字符串中变量无效**
* 单引号字符串中不能单独出现一个单引号，必须成对出现，可作为字符串拼接使用

#### 双引号

* 双引号中可以使用变量
* 双引号中可以出现转义字符

#### 反引号

反引号内部的字符串被shell解释为命令行，在执行时，shell会先执行该命令，并它的标准输出结果取代整个引号部分

#### 字符串操作

* 字符串拼接

    字符串拼接的两种方法
    * 变量定义时拼接

        ```
        greeting="hello, "$your_name" !"
        greeting_1="hello, ${your_name} !"
        greeting_2='hello, '$your_name' !'
        ```

    * 变量使用时拼接

        ```
        echo $greeting  $greeting_1
        ```

* 获取字符串长度

    ```
    string="abcd"
    echo ${#string} #输出 4
    ```

* 提取子字符串

    ```
    string="runoob is a great site"
    echo ${string:1:4} # 输出 unoo
    ```

    从字符串的第2个字符开始截取4个字符，不改变源字符串

### 数组

