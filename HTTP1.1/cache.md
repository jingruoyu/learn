## 13 HTTP缓存 重要哦

HTTP是通常用于分布式信息系统,可以对响应进行缓存提高性能

缓存的目标
* 减少发送请求：减少网络请求往返
* 减少发送完整响应：减少所需网络带宽

#### 13.1.1 正确的缓存

正确的缓存必须是一个使用缓存持有的最新一次的respond响应request，并且符合以下条件之一
* 通过与源服务器重新验证响应，已检查它是否与源服务器返回的内容等效。
* 缓存未超时
* 响应消息是304、305或请求错误（4xx或5xx）

当缓存无法与远程服务器通信时，如果缓存能够满足响应则应该直接使用，否则应该返回错误或警告出现通信错误

当缓存接收到响应时，应该直接转发给发出请求的客户端，即使响应已经超时也不应该添加任何或移除任何`Warning`头。响应可能在传输过程中超时，所以为了避免无穷循环，不应该由缓存在此处进行校验。当UA收到没有`Warning`的超时响应时，可能需要向用户展示一个警告信息

#### 13.1.2 告警信息

当缓存返回一个被转发来的或已经超时的响应时，HTTP/1.1应该在响应上添加`Warning`头，允许客户端进行适当的操作

`Warning`头可能被用于缓存或其他功能，使用`Warning`的目的在于区分其与真正的请求错误

`Warning`头取值有三位，第一位用于判断是否必须从存储的缓存项中删除警告，1为删除，2为不删除

#### 13.1.3 缓存控制机制

HTTP/1.1中基本的缓存控制使用`Cache-Control`头，可以在其中发送各种指令，通常这些指令会覆盖默认的缓存算法

但是`Cache-Control`的语义性被虚弱

#### 13.1.4 